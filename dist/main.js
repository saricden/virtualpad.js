!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(self,(function(){return(()=>{"use strict";var t={851:(t,e,n)=>{function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e),n.d(e,{default:()=>o});const o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.testStr="hello from lib",this.thumbstickDown=!1}var e,n;return e=t,(n=[{key:"log",value:function(){console.log(this.testStr)}},{key:"createJoystick",value:function(){var t=document.createElement("div");t.setAttribute("data-vbjoystick",!0);var e=document.createElement("div");return e.setAttribute("data-vbthumbstick",!0),t.appendChild(e),t}},{key:"createButtonPad",value:function(){var t=document.createElement("div");t.setAttribute("data-vbbtnpad",!0);var e=document.createElement("div");e.setAttribute("data-vbabtn",!0),e.innerHTML="A";var n=document.createElement("div");return n.setAttribute("data-vbbbtn",!0),n.innerHTML="B",t.appendChild(e),t.appendChild(n),t}},{key:"createStart",value:function(){var t=document.createElement("div");return t.setAttribute("data-vbstart",!0),t.innerHTML="START",t}},{key:"bindUI",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(window.virtualboy={ui:{joystick:{isDown:!1,xAxis:0,yAxis:0},aBtn:{isDown:!1},bBtn:{isDown:!1}}},e&&document.body.appendChild(e),n&&document.body.appendChild(n),e){var i=e.querySelector("[data-vbthumbstick]");i.addEventListener("pointerdown",(function(e){window.virtualboy.ui.joystick.isDown=!0,t.thumbstickDown=!0,console.log("down")})),i.addEventListener("pointermove",(function(t){if(window.virtualboy.ui.joystick.isDown){var n=e.getBoundingClientRect(),o=n.x,r=n.y,a=n.width,u=n.height,l=t.clientX-o,d=t.clientY-r;window.virtualboy.ui.joystick.xAxis=Math.min(Math.max(l/a*2-1,-1),1),window.virtualboy.ui.joystick.yAxis=Math.min(Math.max(d/u*2-1,-1),1),l>0&&l<a&&(i.style.left="".concat(l,"px")),d>0&&d<u&&(i.style.top="".concat(d,"px")),console.log("move")}})),i.addEventListener("pointerup",(function(){window.virtualboy.ui.joystick.isDown=!1;var t=null,n=null;try{t=window.getComputedStyle(e,null).getPropertyValue("width"),n=window.getComputedStyle(e,null).getPropertyValue("height")}catch(i){t=e.currentStyle.width,n=e.currentStyle.height}var o=(t=parseInt(t.replace("px",""),10))/2,r=(n=parseInt(n.replace("px",""),10))/2;i.style.left="".concat(o,"px"),i.style.top="".concat(r,"px")})),i.addEventListener("pointercancel",(function(){window.virtualboy.ui.joystick.isDown=!1,console.log("cancel")}))}if(n){var o=n.querySelector("[data-vbabtn]"),r=n.querySelector("[data-vbbbtn]");o.addEventListener("pointerdown",(function(){window.virtualboy.ui.aBtn.isDown=!0})),o.addEventListener("pointerup",(function(){window.virtualboy.ui.aBtn.isDown=!1})),o.addEventListener("pointercancel",(function(){window.virtualboy.ui.aBtn.isDown=!1})),r.addEventListener("pointerdown",(function(){window.virtualboy.ui.bBtn.isDown=!0})),r.addEventListener("pointerup",(function(){window.virtualboy.ui.bBtn.isDown=!1})),r.addEventListener("pointercancel",(function(){window.virtualboy.ui.bBtn.isDown=!1}))}}}])&&i(e.prototype,n),t}()}},e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}return n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(851)})()}));